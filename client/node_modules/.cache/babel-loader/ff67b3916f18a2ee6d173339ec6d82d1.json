{"remainingRequest":"/home/zyx/workspaces/python/server_management/client/node_modules/babel-loader/lib/index.js!/home/zyx/workspaces/python/server_management/client/node_modules/eslint-loader/index.js??ref--13-0!/home/zyx/workspaces/python/server_management/client/src/store/modules/user.js","dependencies":[{"path":"/home/zyx/workspaces/python/server_management/client/src/store/modules/user.js","mtime":1621154887326},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvaG9tZS96eXgvd29ya3NwYWNlcy9weXRob24vc2VydmVyX21hbmFnZW1lbnQvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX211dGF0aW9uczsKCmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgeyBVU0VSX1JFUVVFU1QsIFVTRVJfRVJST1IsIFVTRVJfU1VDQ0VTUyB9IGZyb20gIi4uL2FjdGlvbnMvdXNlciI7CmltcG9ydCB7IGFwaUNhbGwsIGFwaV9yb3V0ZXMgfSBmcm9tICJAL3V0aWxzL2FwaSI7CmltcG9ydCB7IEFVVEhfTE9HT1VUIH0gZnJvbSAiLi4vYWN0aW9ucy9hdXRoIjsKdmFyIHN0YXRlID0gewogIHN0YXR1czogIiIsCiAgcHJvZmlsZToge30KfTsKdmFyIGdldHRlcnMgPSB7CiAgZ2V0UHJvZmlsZTogZnVuY3Rpb24gZ2V0UHJvZmlsZShzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnByb2ZpbGU7CiAgfSwKICBpc1Byb2ZpbGVMb2FkZWQ6IGZ1bmN0aW9uIGlzUHJvZmlsZUxvYWRlZChzdGF0ZSkgewogICAgcmV0dXJuICEhc3RhdGUucHJvZmlsZS5uYW1lOwogIH0KfTsKCnZhciBhY3Rpb25zID0gX2RlZmluZVByb3BlcnR5KHt9LCBVU0VSX1JFUVVFU1QsIGZ1bmN0aW9uIChfcmVmKSB7CiAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0LAogICAgICBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2g7CiAgY29tbWl0KFVTRVJfUkVRVUVTVCk7CiAgYXBpQ2FsbCh7CiAgICB1cmw6IGFwaV9yb3V0ZXMudXNlci5wcm9maWxlLAogICAgbWV0aG9kOiAiZ2V0IgogIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgIGNvbW1pdChVU0VSX1NVQ0NFU1MsIHJlc3ApOwogIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgIGNvbnNvbGUubG9nKGVycik7CiAgICBjb21taXQoVVNFUl9FUlJPUik7IC8vIGlmIHJlc3AgaXMgdW5hdXRob3JpemVkLCBsb2dvdXQsIHRvbwoKICAgIGRpc3BhdGNoKEFVVEhfTE9HT1VUKTsKICB9KTsKfSk7Cgp2YXIgbXV0YXRpb25zID0gKF9tdXRhdGlvbnMgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIFVTRVJfUkVRVUVTVCwgZnVuY3Rpb24gKHN0YXRlKSB7CiAgc3RhdGUuc3RhdHVzID0gImxvYWRpbmciOwp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIFVTRVJfU1VDQ0VTUywgZnVuY3Rpb24gKHN0YXRlLCByZXNwKSB7CiAgc3RhdGUuc3RhdHVzID0gInN1Y2Nlc3MiOwogIHN0YXRlLnByb2ZpbGUgPSByZXNwOwogIGNvbnNvbGUubG9nKCJ1c2VyIHByb2ZpbGUgc3RvcmVkOiIsIHJlc3AsIHN0YXRlLnByb2ZpbGUpOwp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIFVTRVJfRVJST1IsIGZ1bmN0aW9uIChzdGF0ZSkgewogIHN0YXRlLnN0YXR1cyA9ICJlcnJvciI7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgQVVUSF9MT0dPVVQsIGZ1bmN0aW9uIChzdGF0ZSkgewogIHN0YXRlLnByb2ZpbGUgPSB7fTsKfSksIF9tdXRhdGlvbnMpOwpleHBvcnQgZGVmYXVsdCB7CiAgc3RhdGU6IHN0YXRlLAogIGdldHRlcnM6IGdldHRlcnMsCiAgYWN0aW9uczogYWN0aW9ucywKICBtdXRhdGlvbnM6IG11dGF0aW9ucwp9Ow=="},{"version":3,"sources":["/home/zyx/workspaces/python/server_management/client/src/store/modules/user.js"],"names":["USER_REQUEST","USER_ERROR","USER_SUCCESS","apiCall","api_routes","AUTH_LOGOUT","state","status","profile","getters","getProfile","isProfileLoaded","name","actions","commit","dispatch","url","user","method","then","resp","catch","err","console","log","mutations"],"mappings":";;;;;AAAA,SAASA,YAAT,EAAuBC,UAAvB,EAAmCC,YAAnC,QAAuD,iBAAvD;AACA,SAASC,OAAT,EAAkBC,UAAlB,QAAoC,aAApC;AACA,SAASC,WAAT,QAA4B,iBAA5B;AAEA,IAAMC,KAAK,GAAG;AAAEC,EAAAA,MAAM,EAAE,EAAV;AAAcC,EAAAA,OAAO,EAAE;AAAvB,CAAd;AAEA,IAAMC,OAAO,GAAG;AACdC,EAAAA,UAAU,EAAE,oBAACJ,KAAD,EAAW;AACrB,WAAOA,KAAK,CAACE,OAAb;AACD,GAHa;AAIdG,EAAAA,eAAe,EAAE,yBAAAL,KAAK;AAAA,WAAI,CAAC,CAACA,KAAK,CAACE,OAAN,CAAcI,IAApB;AAAA;AAJR,CAAhB;;AAOA,IAAMC,OAAO,uBACVb,YADU,EACK,gBAA0B;AAAA,MAAvBc,MAAuB,QAAvBA,MAAuB;AAAA,MAAfC,QAAe,QAAfA,QAAe;AACxCD,EAAAA,MAAM,CAACd,YAAD,CAAN;AACAG,EAAAA,OAAO,CAAC;AAAEa,IAAAA,GAAG,EAAEZ,UAAU,CAACa,IAAX,CAAgBT,OAAvB;AAAgCU,IAAAA,MAAM,EAAE;AAAxC,GAAD,CAAP,CACGC,IADH,CACQ,UAAAC,IAAI,EAAI;AACZN,IAAAA,MAAM,CAACZ,YAAD,EAAekB,IAAf,CAAN;AACD,GAHH,EAIGC,KAJH,CAIS,UAAAC,GAAG,EAAI;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAR,IAAAA,MAAM,CAACb,UAAD,CAAN,CAFY,CAGZ;;AACAc,IAAAA,QAAQ,CAACV,WAAD,CAAR;AACD,GATH;AAUD,CAbU,CAAb;;AAgBA,IAAMoB,SAAS,iDACZzB,YADY,EACG,UAAAM,KAAK,EAAI;AACvBA,EAAAA,KAAK,CAACC,MAAN,GAAe,SAAf;AACD,CAHY,+BAIZL,YAJY,EAIG,UAACI,KAAD,EAAQc,IAAR,EAAiB;AAC/Bd,EAAAA,KAAK,CAACC,MAAN,GAAe,SAAf;AACAD,EAAAA,KAAK,CAACE,OAAN,GAAgBY,IAAhB;AACAG,EAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoCJ,IAApC,EAA0Cd,KAAK,CAACE,OAAhD;AACD,CARY,+BASZP,UATY,EASC,UAAAK,KAAK,EAAI;AACrBA,EAAAA,KAAK,CAACC,MAAN,GAAe,OAAf;AACD,CAXY,+BAYZF,WAZY,EAYE,UAAAC,KAAK,EAAI;AACtBA,EAAAA,KAAK,CAACE,OAAN,GAAgB,EAAhB;AACD,CAdY,cAAf;AAiBA,eAAe;AACbF,EAAAA,KAAK,EAALA,KADa;AAEbG,EAAAA,OAAO,EAAPA,OAFa;AAGbI,EAAAA,OAAO,EAAPA,OAHa;AAIbY,EAAAA,SAAS,EAATA;AAJa,CAAf","sourcesContent":["import { USER_REQUEST, USER_ERROR, USER_SUCCESS } from \"../actions/user\";\nimport { apiCall, api_routes } from \"@/utils/api\";\nimport { AUTH_LOGOUT } from \"../actions/auth\";\n\nconst state = { status: \"\", profile: {} };\n\nconst getters = {\n  getProfile: (state) => {\n    return state.profile;\n  },\n  isProfileLoaded: state => !!state.profile.name\n};\n\nconst actions = {\n  [USER_REQUEST]: ({ commit, dispatch }) => {\n    commit(USER_REQUEST);\n    apiCall({ url: api_routes.user.profile, method: \"get\"})\n      .then(resp => {\n        commit(USER_SUCCESS, resp);\n      })\n      .catch(err => {\n        console.log(err);\n        commit(USER_ERROR);\n        // if resp is unauthorized, logout, too\n        dispatch(AUTH_LOGOUT);\n      });\n  }\n};\n\nconst mutations = {\n  [USER_REQUEST]: state => {\n    state.status = \"loading\";\n  },\n  [USER_SUCCESS]: (state, resp) => {\n    state.status = \"success\";\n    state.profile = resp;\n    console.log(\"user profile stored:\", resp, state.profile);\n  },\n  [USER_ERROR]: state => {\n    state.status = \"error\";\n  },\n  [AUTH_LOGOUT]: state => {\n    state.profile = {};\n  }\n};\n\nexport default {\n  state,\n  getters,\n  actions,\n  mutations\n};\n"]}]}