{"remainingRequest":"/home/zyx/workspaces/python/server_management/client/node_modules/babel-loader/lib/index.js!/home/zyx/workspaces/python/server_management/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/zyx/workspaces/python/server_management/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/zyx/workspaces/python/server_management/client/src/views/Instances.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/zyx/workspaces/python/server_management/client/src/views/Instances.vue","mtime":1621433464856},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGFwaV9yb3V0ZXMsIGFwaUNhbGwgfSBmcm9tICdAL3V0aWxzL2FwaSc7CmltcG9ydCBEYXRhVGFibGUgZnJvbSAnQC9jb21wb25lbnRzL0RhdGFUYWJsZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnYmlnVGFibGUnLAogIGNvbXBvbmVudHM6IHsKICAgIERhdGFUYWJsZTogRGF0YVRhYmxlCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW5zdGFuY2VzVVJMOiBhcGlfcm91dGVzLnVzZXIuaW5zdGFuY2VzLAogICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgdGFibGVLZXk6IDAsCiAgICAgIG9wdGlvbnM6IFt7CiAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgbGFiZWw6ICfku4VDUFXotYTmupAnCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogMSwKICAgICAgICBsYWJlbDogJzHljaEnCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogMiwKICAgICAgICBsYWJlbDogJzLljaEnCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogNCwKICAgICAgICBsYWJlbDogJzTljaEnCiAgICAgIH1dCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIGdwdUZvcm1hdDogZnVuY3Rpb24gZ3B1Rm9ybWF0KHJvdywgY29sdW1uKSB7CiAgICAgIHJldHVybiByb3cuZ3B1X251bSArICLljaEiOwogICAgfSwKICAgIHRpbWVGb3JtYXQ6IGZ1bmN0aW9uIHRpbWVGb3JtYXQocm93LCBjb2x1bW4pIHsKICAgICAgcmV0dXJuIHJvdy5sZWZ0X3RpbWUgKyAi5aSpIjsKICAgIH0sCiAgICBzdGF0dXNGb3JtYXQ6IGZ1bmN0aW9uIHN0YXR1c0Zvcm1hdChyb3csIGNvbHVtbikgewogICAgICBpZiAocm93LnN0YXR1cyA9PSAiZnJlZSIpIHsKICAgICAgICByZXR1cm4gIuepuumXsiI7CiAgICAgIH0gZWxzZSBpZiAocm93LnN0YXR1cyA9PSAid2FpdCIpIHsKICAgICAgICByZXR1cm4gIuW3suiiq+eUs+ivtyI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICLlt7LooqvliIbphY0iOwogICAgICB9CiAgICB9LAogICAgdGFibGVSb3dDbGFzc05hbWU6IGZ1bmN0aW9uIHRhYmxlUm93Q2xhc3NOYW1lKF9yZWYpIHsKICAgICAgdmFyIHJvdyA9IF9yZWYucm93LAogICAgICAgICAgcm93SW5kZXggPSBfcmVmLnJvd0luZGV4OwogICAgICBjb25zb2xlLmxvZygicm93IGNsYXNzICIsIHJvd0luZGV4LCByb3dJbmRleCAlIDIsIHJvd0luZGV4ID09IDEpOwoKICAgICAgaWYgKHJvd0luZGV4ICUgMyA9PSAxKSB7CiAgICAgICAgcmV0dXJuICd3YXJuaW5nLXJvdyc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICdzdWNjZXNzLXJvdyc7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVBcHBseTogZnVuY3Rpb24gaGFuZGxlQXBwbHkocm93X2luZGV4LCByb3cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBuYW1lID0gcm93Lm5hbWUsCiAgICAgICAgICBncHVfbnVtID0gcm93LmdwdV9udW0sCiAgICAgICAgICBvcHRfZ3B1X251bSA9IHJvdy5vcHRfZ3B1X251bTsKICAgICAgdmFyIGFwcGx5VVJMID0gYXBpX3JvdXRlcy51c2VyLmFwcGx5OwogICAgICB0aGlzLiRjb25maXJtKCfov5nkvJrmj5DkuqTkuIDmrKHnlLPor7fvvIznoa7orqTlkJcnLCAnV2FybmluZycsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruiupCcsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgIG1lc3NhZ2U6ICfnlLPor7flt7Lmj5DkuqQnCiAgICAgICAgfSk7CgogICAgICAgIGFwaUNhbGwoewogICAgICAgICAgdXJsOiBhcHBseVVSTCwKICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgICAgZ3B1X251bTogZ3B1X251bSwKICAgICAgICAgICAgb3B0X2dwdV9udW06IG9wdF9ncHVfbnVtCiAgICAgICAgICB9LAogICAgICAgICAgbWV0aG9kOiAicG9zdCIKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICBfdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgbWVzc2FnZTogcmVzcC5tZXNzYWdlCiAgICAgICAgICB9KTsKCiAgICAgICAgICBfdGhpcy50YWJsZUtleSArPSAxOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgbWVzc2FnZTogJ+eUs+ivt+WPlua2iCcKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlRGlzYWJsZTogZnVuY3Rpb24gaGFuZGxlRGlzYWJsZShpbmRleCwgcm93KSB7CiAgICAgIHJldHVybiByb3cuc3RhdHVzICE9ICJmcmVlIjsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Instances.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <data-table\n      ref=\"dateTable\"\n      :apiUrl=\"instancesURL\"\n      :row-class-name=\"tableRowClassName\"\n      :key=\"tableKey\"\n    >\n    <template slot=\"columns\">\n      <el-table-column\n      type=\"index\"\n      width=\"50\"\n      label=\"实例\"\n      align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"name\" label=\"实例名\" align=\"center\"></el-table-column>\n      <el-table-column prop=\"left_time\" label=\"时长\" align=\"center\" \n        :formatter=\"timeFormat\">\n      </el-table-column>\n      <el-table-column prop=\"status\" label=\"状态\" align=\"center\" \n        :formatter=\"statusFormat\">\n      </el-table-column>\n      <el-table-column prop=\"gpu_num\" label=\"GPU数量\">\n        <template slot-scope=\"scope\">\n          <el-select v-model=\"scope.row.gpu_num\" placeholder=\"请选择\" :disabled=\"handleDisable(scope.$index, scope.row)\">\n            <el-option\n              v-for=\"item in options\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\">\n            </el-option>\n          </el-select>\n          </template>\n      </el-table-column>\n      <el-table-column\n      label=\"操作\"\n      align=\"center\">\n      <template slot-scope=\"scope\">\n        <el-button\n          type=\"warning\"\n          size=\"mini\"\n          icon=\"el-icon-edit\"\n          :disabled=\"handleDisable(scope.$index, scope.row)\"\n          @click=\"handleApply(scope.$index, scope.row)\">申请</el-button>\n      </template>\n    </el-table-column>\n    </template>\n    </data-table>\n  </div>\n</template>\n\n<style>\n  .el-table .warning-row {\n    background: oldlace;\n  }\n\n  .el-table .success-row {\n    background: #f0f9eb;\n  }\n</style>\n\n<script>\nimport {api_routes, apiCall} from '@/utils/api';\nimport DataTable from '@/components/DataTable';\n\nexport default {\n  name: 'bigTable',\n  components: {\n    DataTable,\n  },\n  data() {\n    return {\n      instancesURL: api_routes.user.instances,\n      method: \"post\",\n      tableKey: 0,\n      options: [{\n        value: 0,\n        label: '仅CPU资源'\n      }, {\n        value: 1,\n        label: '1卡'\n      }, {\n        value: 2,\n        label: '2卡'\n      }, {\n        value: 4,\n        label: '4卡'\n      },],\n    };\n  },\n  mounted() {},\n  methods: {\n    gpuFormat(row, column) {\n      return row.gpu_num + \"卡\";\n    },\n    timeFormat(row, column) {\n      return row.left_time + \"天\";\n    },\n    statusFormat(row, column) {\n      if (row.status == \"free\"){\n        return \"空闲\";\n      }else if (row.status == \"wait\"){\n        return \"已被申请\";\n      }else{\n        return \"已被分配\";\n      }\n    },\n    tableRowClassName({row, rowIndex}) {\n      console.log(\"row class \", rowIndex, rowIndex % 2, rowIndex == 1);\n      if ((rowIndex % 3) == 1) {\n        return 'warning-row';\n      } else{\n        return 'success-row';\n      }\n    },\n    handleApply(row_index, row){\n      let {name, gpu_num, opt_gpu_num} = row;\n      let applyURL = api_routes.user.apply;\n      this.$confirm('这会提交一次申请，确认吗', 'Warning', {\n        confirmButtonText: '确认',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$message({\n          type: 'success',\n          message: '申请已提交'\n        });\n        apiCall({url: applyURL, data: {name, gpu_num, opt_gpu_num}, method: \"post\"})\n          .then(resp => {this.$message({type: 'info', message: resp.message}); this.tableKey += 1;});\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '申请取消'\n        });          \n      });\n    },\n    handleDisable(index, row){\n      return row.status != \"free\";\n    }\n  },\n};\n</script>\n"],"sourceRoot":"src/views"}]}