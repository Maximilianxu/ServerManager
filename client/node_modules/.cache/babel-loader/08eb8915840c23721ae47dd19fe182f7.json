{"remainingRequest":"/home/zyx/workspaces/python/server_management/client/node_modules/babel-loader/lib/index.js!/home/zyx/workspaces/python/server_management/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/zyx/workspaces/python/server_management/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/zyx/workspaces/python/server_management/client/src/components/Instances.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/zyx/workspaces/python/server_management/client/src/components/Instances.vue","mtime":1620996801800},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/cache-loader/dist/cjs.js","mtime":1620975162146},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/babel-loader/lib/index.js","mtime":1620972006384},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/cache-loader/dist/cjs.js","mtime":1620975162146},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/vue-loader/lib/index.js","mtime":1620975168476}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IEFsZXJ0IGZyb20gIi4vQWxlcnQudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbnN0czogW10sCiAgICAgIGFwcGx5R1BVRm9ybTogewogICAgICAgIGdwdV9udW06IDAKICAgICAgfSwKICAgICAgbWVzc2FnZTogIkdQVSBhbGVydCIsCiAgICAgIHNob3dNZXNzYWdlOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIGFsZXJ0OiBBbGVydAogIH0sCiAgbWV0aG9kczogewogICAgZ2V0SW5zdHM6IGZ1bmN0aW9uIGdldEluc3RzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHBhdGggPSAiaHR0cDovL2xvY2FsaG9zdDo1MDAwL2luc3RhbmNlcyI7CiAgICAgIGF4aW9zLmdldChwYXRoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5pbnN0cyA9IHJlcy5kYXRhLmluc3RzOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUKICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgfSk7CiAgICB9LAogICAgaW5pdEZvcm06IGZ1bmN0aW9uIGluaXRGb3JtKCkgewogICAgICB0aGlzLmFwcGx5R1BVRm9ybS5ncHVfbnVtID0gMDsKICAgIH0sCiAgICBvblN1Ym1pdEFwcGx5OiBmdW5jdGlvbiBvblN1Ym1pdEFwcGx5KGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdGhpcy4kcmVmcy5hcHBseUdQVU1vZGFsLmhpZGUoKTsKICAgICAgdmFyIHBheWxvYWQgPSB7CiAgICAgICAgZ3B1X251bTogdGhpcy5hcHBseUdQVUZvcm0uZ3B1X251bQogICAgICB9OwogICAgICB0aGlzLmFwcGx5SW5zdChwYXlsb2FkKTsKICAgICAgdGhpcy5pbml0Rm9ybSgpOwogICAgfSwKICAgIHByZUFwcGx5SW5zdDogZnVuY3Rpb24gcHJlQXBwbHlJbnN0KGluc3QpIHsKICAgICAgdGhpcy5hcHBseUdQVUZvcm0uZ3B1X251bSA9IGluc3QuZ3B1cy5sZW5ndGhsOwogICAgfSwKICAgIGFwcGx5SW5zdDogZnVuY3Rpb24gYXBwbHlJbnN0KHBheWxvYWQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgcGF0aCA9ICJodHRwOi8vbG9jYWxob3N0OjUwMDAvaW5zdGFuY2VzLyI7CiAgICAgIGF4aW9zLnB1dChwYXRoLCBwYXlsb2FkKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIuZ2V0SW5zdHMoKTsKCiAgICAgICAgX3RoaXMyLm1lc3NhZ2UgPSAiQXBwbHkgU3VjZXNzISI7CiAgICAgICAgX3RoaXMyLnNob3dNZXNzYWdlID0gdHJ1ZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CgogICAgICAgIF90aGlzMi5nZXRJbnN0cygpOwogICAgICB9KTsKICAgIH0sCiAgICBvblJlc2V0QXBwbHk6IGZ1bmN0aW9uIG9uUmVzZXRBcHBseShldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMuJHJlZnMuYXBwbHlHUFVNb2RhbC5oaWRlKCk7CiAgICAgIHRoaXMuaW5pdEZvcm0oKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldEluc3RzKCk7CiAgfQp9Ow=="},{"version":3,"sources":["Instances.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,KAAA,MAAA,aAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,YAAA,EAAA;AACA,QAAA,OAAA,EAAA;AADA,OAFA;AAKA,MAAA,OAAA,EAAA,WALA;AAMA,MAAA,WAAA,EAAA;AANA,KAAA;AAQA,GAVA;AAWA,EAAA,UAAA,EAAA;AACA,IAAA,KAAA,EAAA;AADA,GAXA;AAcA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA,UAAA,IAAA,GAAA,iCAAA;AACA,MAAA,KAAA,CACA,GADA,CACA,IADA,EAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAAA,KAAA;AACA,OAJA,EAKA,KALA,CAKA,UAAA,KAAA,EAAA;AACA;AACA,QAAA,OAAA,CAAA,KAAA,CAAA,KAAA;AACA,OARA;AASA,KAZA;AAaA,IAAA,QAbA,sBAaA;AACA,WAAA,YAAA,CAAA,OAAA,GAAA,CAAA;AACA,KAfA;AAgBA,IAAA,aAhBA,yBAgBA,GAhBA,EAgBA;AACA,MAAA,GAAA,CAAA,cAAA;AACA,WAAA,KAAA,CAAA,aAAA,CAAA,IAAA;AACA,UAAA,OAAA,GAAA;AACA,QAAA,OAAA,EAAA,KAAA,YAAA,CAAA;AADA,OAAA;AAGA,WAAA,SAAA,CAAA,OAAA;AACA,WAAA,QAAA;AACA,KAxBA;AAyBA,IAAA,YAzBA,wBAyBA,IAzBA,EAyBA;AACA,WAAA,YAAA,CAAA,OAAA,GAAA,IAAA,CAAA,IAAA,CAAA,OAAA;AACA,KA3BA;AA4BA,IAAA,SA5BA,qBA4BA,OA5BA,EA4BA;AAAA;;AACA,UAAA,IAAA,qCAAA;AACA,MAAA,KAAA,CACA,GADA,CACA,IADA,EACA,OADA,EAEA,IAFA,CAEA,YAAA;AACA,QAAA,MAAA,CAAA,QAAA;;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,eAAA;AACA,QAAA,MAAA,CAAA,WAAA,GAAA,IAAA;AACA,OANA,EAOA,KAPA,CAOA,UAAA,KAAA,EAAA;AACA;AACA,QAAA,OAAA,CAAA,KAAA,CAAA,KAAA;;AACA,QAAA,MAAA,CAAA,QAAA;AACA,OAXA;AAYA,KA1CA;AA2CA,IAAA,YA3CA,wBA2CA,GA3CA,EA2CA;AACA,MAAA,GAAA,CAAA,cAAA;AACA,WAAA,KAAA,CAAA,aAAA,CAAA,IAAA;AACA,WAAA,QAAA;AACA;AA/CA,GAdA;AA+DA,EAAA,OA/DA,qBA+DA;AACA,SAAA,QAAA;AACA;AAjEA,CAAA","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col-sm-10\">\n        <h1>Instances</h1>\n        <hr />\n        <br /><br />\n        <alert :message=\"message\" v-if=\"showMessage\"></alert>\n        <br /><br />\n        <table class=\"table table-hover\">\n          <thead>\n            <tr>\n              <th scope=\"col\">Instance ID</th>\n              <th scope=\"col\">GPU config</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(inst, index) in insts\" :key=\"index\">\n              <td>{{ index }}</td>\n              <td>{{ inst.gpus.length }} GPUs, {{ inst.timespan }} days</td>\n              <td>\n                <div class=\"btn-group\" role=\"group\">\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-warning btn-sm\"\n                    v-b-modal.apply-gpu-modal\n                    @click=\"applyInst(inst)\"\n                  >\n                    Apply\n                  </button>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n    <b-modal\n      ref=\"applyGPUModal\"\n      id=\"apply-GPU-modal\"\n      title=\"Add a new book\"\n      hide-footer\n    >\n      <b-form @submit=\"onSubmitApply\" @reset=\"onResetApply\" class=\"w-100\">\n        <b-form-group id=\"form-read-group\">\n          <b-form-checkbox-group id=\"form-checks\">\n            <b-form-checkbox value=\"false\">Are you sure?</b-form-checkbox>\n          </b-form-checkbox-group>\n        </b-form-group>\n        <b-button type=\"submit\" variant=\"primary\">Submit</b-button>\n        <b-button type=\"reset\" variant=\"danger\">Reset</b-button>\n      </b-form>\n    </b-modal>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Alert from \"./Alert.vue\";\n\nexport default {\n  data() {\n    return {\n      insts: [],\n      applyGPUForm: {\n        gpu_num: 0,\n      },\n      message: \"GPU alert\",\n      showMessage: false,\n    };\n  },\n  components: {\n    alert: Alert,\n  },\n  methods: {\n    getInsts() {\n      const path = \"http://localhost:5000/instances\";\n      axios\n        .get(path)\n        .then((res) => {\n          this.insts = res.data.insts;\n        })\n        .catch((error) => {\n          // eslint-disable-next-line\n          console.error(error);\n        });\n    },\n    initForm() {\n      this.applyGPUForm.gpu_num = 0;\n    },\n    onSubmitApply(evt) {\n      evt.preventDefault();\n      this.$refs.applyGPUModal.hide();\n      const payload = {\n        gpu_num: this.applyGPUForm.gpu_num,\n      };\n      this.applyInst(payload);\n      this.initForm();\n    },\n    preApplyInst(inst) {\n      this.applyGPUForm.gpu_num = inst.gpus.lengthl;\n    },\n    applyInst(payload) {\n      const path = `http://localhost:5000/instances/`;\n      axios\n        .put(path, payload)\n        .then(() => {\n          this.getInsts();\n          this.message = \"Apply Sucess!\";\n          this.showMessage = true;\n        })\n        .catch((error) => {\n          // eslint-disable-next-line\n          console.error(error);\n          this.getInsts();\n        });\n    },\n    onResetApply(evt) {\n      evt.preventDefault();\n      this.$refs.applyGPUModal.hide();\n      this.initForm();\n    },\n  },\n  created() {\n    this.getInsts();\n  },\n};\n</script>\n"],"sourceRoot":"src/components"}]}