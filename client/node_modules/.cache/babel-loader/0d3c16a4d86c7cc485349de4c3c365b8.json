{"remainingRequest":"/home/zyx/workspaces/python/server_management/client/node_modules/babel-loader/lib/index.js!/home/zyx/workspaces/python/server_management/client/node_modules/eslint-loader/index.js??ref--13-0!/home/zyx/workspaces/python/server_management/client/src/utils/permission.js","dependencies":[{"path":"/home/zyx/workspaces/python/server_management/client/src/utils/permission.js","mtime":1621134644966},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CgovKioKICog5p2D6ZmQCiAqLwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKaW1wb3J0IG1lbnUgZnJvbSAnQC9yb3V0ZXIvbWVudSc7CmltcG9ydCBzZXR0aW5ncyBmcm9tICdAL3NldHRpbmdzJzsKaW1wb3J0IF8gZnJvbSAnbG9kYXNoJzsgLy8g6YCS5b2S5Yy56YWNbWVudSBuYW1l562b6YCJ6I+c5Y2VCgp2YXIgZmlsdGVyTWVudSA9IGZ1bmN0aW9uIGZpbHRlck1lbnUobWVudU9iaiwgYXV0aE1lbnUpIHsKICB2YXIgX21lbnVzID0gXy5jbG9uZURlZXAobWVudU9iaik7CgogIHJldHVybiBfbWVudXMuZmlsdGVyKGZ1bmN0aW9uIChtZW51KSB7CiAgICAvLyDpmpDol4/kuI3mmL7npLrnmoRtZW51CiAgICBpZiAobWVudS5oaWRkZW4pIHJldHVybiBmYWxzZTsKCiAgICBpZiAoc2V0dGluZ3MuTkVFRF9QRVJNSVNTSU9OID09PSBmYWxzZSB8fCBhdXRoTWVudS5pbmRleE9mKG1lbnUubmFtZSkgPiAtMSkgewogICAgICAvLyDlr7nlrZDoj5zljZXov5vooYzpgJLlvZLov4fmu6QKICAgICAgaWYgKG1lbnUuY2hpbGRyZW4gJiYgbWVudS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7CiAgICAgICAgbWVudS5jaGlsZHJlbiA9IGZpbHRlck1lbnUobWVudS5jaGlsZHJlbiwgYXV0aE1lbnUpOyAvLyDov4fmu6TmjonlrZDoj5zljZXlhajpg6jmsqHmnInmnYPpmZDmiJbkuI3mmL7npLrnmoTkuLvoj5zljZUKCiAgICAgICAgaWYgKG1lbnUuY2hpbGRyZW4gJiYgbWVudS5jaGlsZHJlbi5sZW5ndGggPT09IDApIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfSAvLyDniLboj5zljZXkuI3ljLnphY3vvIznm7TmjqXkuI3lho3ov5Tlm57lrZDoj5zljZUKCgogICAgcmV0dXJuIGZhbHNlOwogIH0pOwp9OyAvLyDojrflj5bmjojmnYPorr/pl67nmoToj5zljZUKCgp2YXIgZmlsdGVyZWRNZW51ID0gZnVuY3Rpb24gZmlsdGVyZWRNZW51KCkgewogIGlmIChzZXR0aW5ncy5ORUVEX1BFUk1JU1NJT04gPT09IGZhbHNlKSB7CiAgICByZXR1cm4gbWVudTsKICB9CgogIHJldHVybiBmaWx0ZXJNZW51KG1lbnUsIHN0b3JlLmdldHRlcnNbJ2dldE1lbnUnXSk7Cn07IC8vIOaYr+WQpuaOiOadg+iuv+mXruiPnOWNlQoKCnZhciBpc0F1dGhNZW51ID0gZnVuY3Rpb24gaXNBdXRoTWVudShyZXNvdXJjZU5hbWUpIHsKICAvLyA0MDQg5ZKMIOmmlumhteeZu+W9leWQjuWPr+S7peiuv+mXrgogIGlmICghcmVzb3VyY2VOYW1lIHx8IFsnd2VsY29tZScsICd3ZWxjb21lLmluZGV4JywgJ2xvZ2luJywgJ2xvZ2luLmluZGV4J10uaW5kZXhPZihyZXNvdXJjZU5hbWUpID4gLTEpIHsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgdmFyIGF1dGhNZW51ID0gc3RvcmUuZ2V0dGVyc1snZ2V0TWVudSddOyAvLyDlt7LmjojmnYPnmoToj5zljZUKCiAgcmV0dXJuIHNldHRpbmdzLk5FRURfUEVSTUlTU0lPTiA9PT0gZmFsc2UgPyB0cnVlIDogYXV0aE1lbnUuaW5kZXhPZihyZXNvdXJjZU5hbWUpID4gLTE7Cn07IC8vIOaYr+WQpuaOiOadg+iuv+mXruaOpeWPowoKCnZhciBpc0F1dGhBcGkgPSBmdW5jdGlvbiBpc0F1dGhBcGkocmVzb3VyY2VOYW1lKSB7CiAgdmFyIGF1dGhBcGkgPSBzdG9yZS5nZXR0ZXJzWydnZXRBcGknXTsgLy8g5bey5o6I5p2D55qEQVBJCgogIHJldHVybiBzZXR0aW5ncy5ORUVEX1BFUk1JU1NJT04gPT09IGZhbHNlID8gdHJ1ZSA6IGF1dGhBcGkuaW5kZXhPZihyZXNvdXJjZU5hbWUpID4gLTE7Cn07IC8vIOaYr+WQpuaOiOadg+iuv+mXruihjOS4ugoKCnZhciBpc0F1dGhBY3Rpb24gPSBmdW5jdGlvbiBpc0F1dGhBY3Rpb24ocmVzb3VyY2VOYW1lKSB7CiAgdmFyIGF1dGhBY3Rpb24gPSBzdG9yZS5nZXR0ZXJzWydnZXRBY3Rpb24nXTsgLy8g5bey5o6I5p2D55qE6KGM5Li6CgogIHJldHVybiBzZXR0aW5ncy5ORUVEX1BFUk1JU1NJT04gPT09IGZhbHNlID8gdHJ1ZSA6IGF1dGhBY3Rpb24uaW5kZXhPZihyZXNvdXJjZU5hbWUpID4gLTE7Cn07IC8vIOa3u+WKoOWIsCBWdWUg5a6e5L6L5pa55rOVCgoKVnVlLnByb3RvdHlwZS5pc0F1dGhNZW51ID0gaXNBdXRoTWVudTsKVnVlLnByb3RvdHlwZS5pc0F1dGhBcGkgPSBpc0F1dGhBcGk7ClZ1ZS5wcm90b3R5cGUuaXNBdXRoQWN0aW9uID0gaXNBdXRoQWN0aW9uOwpleHBvcnQgZGVmYXVsdCB7CiAgZmlsdGVyZWRNZW51OiBmaWx0ZXJlZE1lbnUsCiAgaXNBdXRoTWVudTogaXNBdXRoTWVudSwKICBpc0F1dGhBcGk6IGlzQXV0aEFwaSwKICBpc0F1dGhBY3Rpb246IGlzQXV0aEFjdGlvbgp9Ow=="},{"version":3,"sources":["/home/zyx/workspaces/python/server_management/client/src/utils/permission.js"],"names":["Vue","store","menu","settings","_","filterMenu","menuObj","authMenu","_menus","cloneDeep","filter","hidden","NEED_PERMISSION","indexOf","name","children","length","filteredMenu","getters","isAuthMenu","resourceName","isAuthApi","authApi","isAuthAction","authAction","prototype"],"mappings":"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","sourcesContent":["/**\n * 权限\n */\n\n import Vue from 'vue';\n import store from '@/store';\n import menu from '@/router/menu';\n import settings from '@/settings';\n import _ from 'lodash';\n \n // 递归匹配menu name筛选菜单\n const filterMenu = function(menuObj, authMenu) {\n   const _menus = _.cloneDeep(menuObj);\n   return _menus.filter(menu => {\n     // 隐藏不显示的menu\n     if (menu.hidden) return false;\n \n     if (settings.NEED_PERMISSION === false || authMenu.indexOf(menu.name) > -1) {\n       // 对子菜单进行递归过滤\n       if (menu.children && menu.children.length > 0) {\n         menu.children = filterMenu(menu.children, authMenu);\n \n         // 过滤掉子菜单全部没有权限或不显示的主菜单\n         if (menu.children && menu.children.length === 0) {\n           return false;\n         }\n       }\n       return true;\n     }\n     // 父菜单不匹配，直接不再返回子菜单\n     return false;\n   });\n };\n \n // 获取授权访问的菜单\n const filteredMenu = function() {\n   if (settings.NEED_PERMISSION === false) {\n     return menu;\n   }\n   return filterMenu(menu, store.getters['getMenu']);\n };\n \n // 是否授权访问菜单\n const isAuthMenu = function(resourceName) {\n   // 404 和 首页登录后可以访问\n   if (\n     !resourceName ||\n     ['welcome', 'welcome.index', 'login', 'login.index'].indexOf(resourceName) > -1\n   ) {\n     return true;\n   }\n   const authMenu = store.getters['getMenu']; // 已授权的菜单\n   return settings.NEED_PERMISSION === false ? true : authMenu.indexOf(resourceName) > -1;\n };\n \n // 是否授权访问接口\n const isAuthApi = function(resourceName) {\n   const authApi = store.getters['getApi']; // 已授权的API\n   return settings.NEED_PERMISSION === false ? true : authApi.indexOf(resourceName) > -1;\n };\n \n // 是否授权访问行为\n const isAuthAction = function(resourceName) {\n   const authAction = store.getters['getAction']; // 已授权的行为\n   return settings.NEED_PERMISSION === false ? true : authAction.indexOf(resourceName) > -1;\n };\n \n // 添加到 Vue 实例方法\n Vue.prototype.isAuthMenu = isAuthMenu;\n Vue.prototype.isAuthApi = isAuthApi;\n Vue.prototype.isAuthAction = isAuthAction;\n \n export default {\n   filteredMenu,\n   isAuthMenu,\n   isAuthApi,\n   isAuthAction,\n };\n "]}]}