{"remainingRequest":"/home/zyx/workspaces/python/server_management/client/node_modules/babel-loader/lib/index.js!/home/zyx/workspaces/python/server_management/client/node_modules/eslint-loader/index.js??ref--13-0!/home/zyx/workspaces/python/server_management/client/src/router/index.js","dependencies":[{"path":"/home/zyx/workspaces/python/server_management/client/src/router/index.js","mtime":1621259663454},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvaG9tZS96eXgvd29ya3NwYWNlcy9weXRob24vc2VydmVyX21hbmFnZW1lbnQvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZVJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IHN0b3JlIGZyb20gIi4uL3N0b3JlIjsKaW1wb3J0IFJlZ2lzdGVyIGZyb20gJ0Avdmlld3MvUmVnaXN0ZXIudnVlJzsKaW1wb3J0IExvZ2luIGZyb20gJ0Avdmlld3MvTG9naW4udnVlJzsKaW1wb3J0IG1lbnUgZnJvbSAnLi9tZW51JzsKaW1wb3J0IE5Qcm9ncmVzcyBmcm9tICducHJvZ3Jlc3MnOwppbXBvcnQgX2RlZmF1bHQgZnJvbSAndnVleCc7ClZ1ZS51c2UoVnVlUm91dGVyKTsKCnZhciBpZk5vdEF1dGhlbnRpY2F0ZWQgPSBmdW5jdGlvbiBpZk5vdEF1dGhlbnRpY2F0ZWQodG8sIGZyb20sIG5leHQpIHsKICBpZiAoIXN0b3JlLmdldHRlcnMuaXNBdXRoZW50aWNhdGVkKSB7CiAgICBuZXh0KCk7CiAgICByZXR1cm47CiAgfQoKICBuZXh0KCIvIik7Cn07Cgp2YXIgaWZBdXRoZW50aWNhdGVkID0gZnVuY3Rpb24gaWZBdXRoZW50aWNhdGVkKHRvLCBmcm9tLCBuZXh0KSB7CiAgaWYgKHN0b3JlLmdldHRlcnMuaXNBdXRoZW50aWNhdGVkKSB7CiAgICBuZXh0KCk7CiAgICByZXR1cm47CiAgfQoKICBuZXh0KCIvbG9naW4iKTsKfTsKCnZhciByb3V0ZXMgPSBbewogIHBhdGg6ICIvbG9naW4iLAogIG5hbWU6ICJsb2dpbiIsCiAgY29tcG9uZW50OiBMb2dpbgp9LCB7CiAgcGF0aDogIi9yZWdpc3RlciIsCiAgbmFtZTogInJlZ2lzdGVyIiwKICBjb21wb25lbnQ6IFJlZ2lzdGVyCn1dLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkobWVudSkpOyAvLyDnmb3lkI3ljZXvvIzkuI3kvJrph43lrprlkJEKCnZhciB3aGl0ZUxpc3QgPSBbJy9sb2dpbicsICcvcmVnaXN0ZXInXTsKY29uc29sZS5sb2coInJvdXRlcnM6Iiwgcm91dGVzKTsKdmFyIHJvdXRlciA9IG5ldyBWdWVSb3V0ZXIoewogIG1vZGU6ICdoaXN0b3J5JywKICBiYXNlOiBwcm9jZXNzLmVudi5CQVNFX1VSTCwKICByb3V0ZXM6IHJvdXRlcwp9KTsKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgTlByb2dyZXNzLnN0YXJ0KCk7CiAgZG9jdW1lbnQudGl0bGUgPSB0by5tZXRhLnRpdGxlOwogIGNvbnNvbGUubG9nKCJjdXJyZW50IGF1dGggb3Igbm90OiIsIHN0b3JlLmdldHRlcnMuaXNBdXRoZW50aWNhdGVkKTsgLy8g5aaC5p6c5a2Y5ZyoIHRva2VuCgogIGlmIChzdG9yZS5nZXR0ZXJzLmlzQXV0aGVudGljYXRlZCkgewogICAgaWYgKHRvLnBhdGggPT09ICcvbG9naW4nKSB7CiAgICAgIC8vIOi3s+i/h+eZu+W9lQogICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy8nCiAgICAgIH0pOwogICAgICBOUHJvZ3Jlc3MuZG9uZSgpOwogICAgfSBlbHNlIHsKICAgICAgbmV4dCgpOwogICAgfQogIH0gZWxzZSB7CiAgICBpZiAod2hpdGVMaXN0LmluZGV4T2YodG8ucGF0aCkgPiAtMSkgewogICAgICBuZXh0KCk7CiAgICB9IGVsc2UgewogICAgICAvLyDnm7TmjqXot7PovazliLDnmbvlvZXvvIzkuZ/lj6/ku6Xnu5nlh7rmj5DnpLoKICAgICAgcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvbG9naW4nCiAgICAgIH0pOwogICAgICBOUHJvZ3Jlc3MuZG9uZSgpOwogICAgfQogIH0KfSk7CnJvdXRlci5hZnRlckVhY2goZnVuY3Rpb24gKCkgewogIE5Qcm9ncmVzcy5kb25lKCk7Cn0pOwpleHBvcnQgZGVmYXVsdCByb3V0ZXI7"},{"version":3,"sources":["/home/zyx/workspaces/python/server_management/client/src/router/index.js"],"names":["Vue","VueRouter","store","Register","Login","menu","NProgress","_default","use","ifNotAuthenticated","to","from","next","getters","isAuthenticated","ifAuthenticated","routes","path","name","component","whiteList","console","log","router","mode","base","process","env","BASE_URL","beforeEach","start","document","title","meta","push","done","indexOf","afterEach"],"mappings":";;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAOC,QAAP,MAAqB,MAArB;AAEAP,GAAG,CAACQ,GAAJ,CAAQP,SAAR;;AAEA,IAAMQ,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AAC7C,MAAI,CAACV,KAAK,CAACW,OAAN,CAAcC,eAAnB,EAAoC;AAClCF,IAAAA,IAAI;AACJ;AACD;;AACDA,EAAAA,IAAI,CAAC,GAAD,CAAJ;AACD,CAND;;AAQA,IAAMG,eAAe,GAAG,SAAlBA,eAAkB,CAACL,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AAC1C,MAAIV,KAAK,CAACW,OAAN,CAAcC,eAAlB,EAAmC;AACjCF,IAAAA,IAAI;AACJ;AACD;;AACDA,EAAAA,IAAI,CAAC,QAAD,CAAJ;AACD,CAND;;AAQA,IAAMI,MAAM,IACV;AACEC,EAAAA,IAAI,EAAE,QADR;AAEEC,EAAAA,IAAI,EAAE,OAFR;AAGEC,EAAAA,SAAS,EAAEf;AAHb,CADU,EAMV;AACEa,EAAAA,IAAI,EAAE,WADR;AAEEC,EAAAA,IAAI,EAAE,UAFR;AAGEC,EAAAA,SAAS,EAAEhB;AAHb,CANU,4BAWPE,IAXO,EAAZ,C,CAcA;;AACA,IAAMe,SAAS,GAAG,CAAC,QAAD,EAAW,WAAX,CAAlB;AAEAC,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBN,MAAxB;AAEA,IAAMO,MAAM,GAAG,IAAItB,SAAJ,CAAc;AAC3BuB,EAAAA,IAAI,EAAE,SADqB;AAE3BC,EAAAA,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAFS;AAG3BZ,EAAAA,MAAM,EAANA;AAH2B,CAAd,CAAf;AAMAO,MAAM,CAACM,UAAP,CAAkB,UAACnB,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpCN,EAAAA,SAAS,CAACwB,KAAV;AACAC,EAAAA,QAAQ,CAACC,KAAT,GAAiBtB,EAAE,CAACuB,IAAH,CAAQD,KAAzB;AACAX,EAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoCpB,KAAK,CAACW,OAAN,CAAcC,eAAlD,EAHoC,CAIpC;;AACA,MAAIZ,KAAK,CAACW,OAAN,CAAcC,eAAlB,EAAmC;AACjC,QAAIJ,EAAE,CAACO,IAAH,KAAY,QAAhB,EAA0B;AACxB;AACAM,MAAAA,MAAM,CAACW,IAAP,CAAY;AAAEjB,QAAAA,IAAI,EAAE;AAAR,OAAZ;AACAX,MAAAA,SAAS,CAAC6B,IAAV;AACD,KAJD,MAIO;AACLvB,MAAAA,IAAI;AACL;AACF,GARD,MAQO;AACL,QAAIQ,SAAS,CAACgB,OAAV,CAAkB1B,EAAE,CAACO,IAArB,IAA6B,CAAC,CAAlC,EAAqC;AACnCL,MAAAA,IAAI;AACL,KAFD,MAEO;AACL;AACAW,MAAAA,MAAM,CAACW,IAAP,CAAY;AAAEjB,QAAAA,IAAI,EAAE;AAAR,OAAZ;AACAX,MAAAA,SAAS,CAAC6B,IAAV;AACD;AACF;AACF,CAtBD;AAwBAZ,MAAM,CAACc,SAAP,CAAiB,YAAM;AACrB/B,EAAAA,SAAS,CAAC6B,IAAV;AACD,CAFD;AAIA,eAAeZ,MAAf","sourcesContent":["import Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport store from \"../store\";\nimport Register from '@/views/Register.vue';\nimport Login from '@/views/Login.vue';\nimport menu from './menu';\nimport NProgress from 'nprogress';\nimport _default from 'vuex';\n\nVue.use(VueRouter);\n\nconst ifNotAuthenticated = (to, from, next) => {\n  if (!store.getters.isAuthenticated) {\n    next();\n    return;\n  }\n  next(\"/\");\n};\n\nconst ifAuthenticated = (to, from, next) => {\n  if (store.getters.isAuthenticated) {\n    next();\n    return;\n  }\n  next(\"/login\");\n};\n\nconst routes = [\n  {\n    path: \"/login\",\n    name: \"login\",\n    component: Login,\n  },\n  {\n    path: \"/register\",\n    name: \"register\",\n    component: Register,\n  },\n  ...menu,\n];\n\n// 白名单，不会重定向\nconst whiteList = ['/login', '/register'];\n\nconsole.log(\"routers:\", routes);\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes,\n});\n\nrouter.beforeEach((to, from, next) => {\n  NProgress.start();\n  document.title = to.meta.title;\n  console.log(\"current auth or not:\", store.getters.isAuthenticated);\n  // 如果存在 token\n  if (store.getters.isAuthenticated) {\n    if (to.path === '/login') {\n      // 跳过登录\n      router.push({ path: '/' });\n      NProgress.done();\n    } else {\n      next();\n    }\n  } else {\n    if (whiteList.indexOf(to.path) > -1) {\n      next();\n    } else {\n      // 直接跳转到登录，也可以给出提示\n      router.push({ path: '/login' });\n      NProgress.done();\n    }\n  }\n});\n\nrouter.afterEach(() => {\n  NProgress.done();\n});\n\nexport default router;\n"]}]}