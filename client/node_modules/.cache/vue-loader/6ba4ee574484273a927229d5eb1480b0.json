{"remainingRequest":"/home/zyx/workspaces/python/server_management/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/zyx/workspaces/python/server_management/client/src/views/Applied.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/zyx/workspaces/python/server_management/client/src/views/Applied.vue","mtime":1621509078985},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5lbC10YWJsZSAud2FybmluZy1yb3cgewogIGJhY2tncm91bmQ6IG9sZGxhY2U7Cn0KCi5lbC10YWJsZSAuc3VjY2Vzcy1yb3cgewogIGJhY2tncm91bmQ6ICNmMGY5ZWI7Cn0K"},{"version":3,"sources":["Applied.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2IA;AACA;AACA;;AAEA;AACA;AACA","file":"Applied.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <data-table\n      ref=\"dateTable\"\n      :apiUrl=\"appliedURL\"\n      :row-class-name=\"tableRowClassName\"\n      :key=\"tableKey\"\n    >\n    <template slot=\"columns\" style=\"width: 100%\" >\n      <el-table-column prop=\"name\" label=\"实例\" align=\"center\" :min-width=\"20\">\n      </el-table-column>\n      <el-table-column prop=\"gpu_num\" label=\"GPU 配置\" align=\"center\" :min-width=\"20\"\n        :formatter=\"gpuFormat\">\n      </el-table-column>\n      <el-table-column prop=\"left_time\" label=\"时长\" align=\"center\" :min-width=\"20\"\n        :formatter=\"timeFormat\">\n      </el-table-column>\n      <el-table-column prop=\"status\" label=\"状态\" align=\"center\" :min-width=\"10\"\n        :formatter=\"statusFormat\">\n      </el-table-column>\n      <el-table-column prop=\"port\" label=\"端口\" align=\"center\" :min-width=\"20\"\n        :formatter=\"portFormat\">\n      </el-table-column>\n      <el-table-column label=\"密码\" align=\"center\" prop=\"password\" :min-width=\"50\">\n        <template slot-scope=\"scope\">\n          <span style=\"margin-right:1.25em; \">{{scope.row.password}}</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n          <el-button\n            class=\"copyBtn\"\n            data-clipboard-action=\"copy\"\n            data-clipboard-target=\"#bar\"\n            icon=\"el-icon-copy-document\"\n            round\n            size=\"mini\"\n          >copy</el-button>\n          <el-button\n            class=\"copyBtn\"\n            data-clipboard-action=\"copy\"\n            data-clipboard-target=\"#bar\"\n            icon=\"el-icon-view\"\n            round\n            size=\"mini\"\n          >show</el-button>\n        </template>\n      </el-table-column>\n      <el-table-column\n      label=\"操作\"\n      align=\"center\">\n      <template slot-scope=\"scope\" prop=\"operation\" :min-width=\"10\">\n        <el-button\n          type=\"danger\"\n          size=\"mini\"\n          icon=\"el-icon-delete\"\n          @click=\"handleRelease(scope.$index, scope.row)\">释放</el-button>\n      </template>\n    </el-table-column>\n    </template>\n    </data-table>\n  </div>\n</template>\n\n<script>\nimport {api_routes, apiCall} from '@/utils/api';\nimport DataTable from '@/components/DataTable';\n\nexport default {\n  name: 'bigTable',\n  components: {\n    DataTable,\n  },\n  data() {\n    return {\n      appliedURL: api_routes.user.applied,\n      method: \"post\", \n      tableKey: 0,\n    };\n  },\n  mounted() {},\n  methods: {\n    gpuFormat(row, column) {\n      return row.gpu_num + \"卡\";\n    },\n    timeFormat(row, column) {\n      return row.left_time + \"天\";\n    },\n    statusFormat(row, column) {\n      status = row.status;\n      if (status == \"wait\") {\n        return \"排队中\";\n      }else if (status == \"allocated\"){\n        return \"已分配\";\n      }\n      return \"Error Status\";\n    },\n    portFormat(row, column){\n      if (row.status == \"allocated\"){\n        return row.port;\n      }else{\n        return \"xxxx\";\n      }\n    },\n    tableRowClassName({row, rowIndex}) {\n      if (rowIndex === 1) {\n        return 'warning-row';\n      } else if (rowIndex === 3) {\n        return 'success-row';\n      }\n      return '';\n    },\n    handleRelease(row_index, row){\n      let {name} = row;\n      let releaseURL = api_routes.user.release;\n      this.$confirm('这会释放资源，无论是否已被分配，确认吗', 'Warning', {\n        confirmButtonText: '确认',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$message({\n          type: 'success',\n          message: '资源已释放'\n        });\n        \n        apiCall({url: releaseURL, data: {name}, method: \"delete\"})\n          .then(resp => {\n            this.$message({type: 'info', message: resp.message});\n            this.tableKey += 1;\n            console.log(\"table key in then: \", this.tableKey);});\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '取消释放'\n        });   \n        this.tableKey += 1;             \n      });\n    }\n  },\n};\n</script>\n\n<style>\n.el-table .warning-row {\n  background: oldlace;\n}\n\n.el-table .success-row {\n  background: #f0f9eb;\n}\n</style>"]}]}