{"remainingRequest":"/home/zyx/workspaces/python/server_management/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/zyx/workspaces/python/server_management/client/src/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/zyx/workspaces/python/server_management/client/src/views/Home.vue","mtime":1621062054242},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBBbGVydCBmcm9tICdAL2NvbXBvbmVudHMvQWxlcnQudnVlJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW5zdHM6IFtdLAogICAgICBhcHBseUdQVUZvcm06IHsKICAgICAgICBncHVfbnVtOiAwLAogICAgICAgIHN1cmU6IGZhbHNlLAogICAgICB9LAogICAgICBtZXNzYWdlOiAnR1BVIGFsZXJ0JywKICAgICAgc2hvd01lc3NhZ2U6IGZhbHNlLAogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIGFsZXJ0OiBBbGVydCwKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEluc3RzKCkgewogICAgICBjb25zdCBwYXRoID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9pbnN0YW5jZXMnOwogICAgICBheGlvcwogICAgICAgIC5nZXQocGF0aCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmluc3RzID0gcmVzLmRhdGEuaW5zdHM7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgIH0pOwogICAgfSwKICAgIGluaXRGb3JtKCkgewogICAgICB0aGlzLmFwcGx5R1BVRm9ybS5ncHVfbnVtID0gMDsKICAgICAgdGhpcy5hcHBseUdQVUZvcm0uc3VyZSA9IGZhbHNlOwogICAgfSwKICAgIG9uU3VibWl0QXBwbHkoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB0aGlzLiRyZWZzLmFwcGx5R1BVTW9kYWwuaGlkZSgpOwogICAgICBpZiAodGhpcy5hcHBseUdQVUZvcm0uc3VyZSkgewogICAgICAgIGNvbnN0IHBheWxvYWQgPSB7CiAgICAgICAgICBncHVfbnVtOiB0aGlzLmFwcGx5R1BVRm9ybS5ncHVfbnVtLAogICAgICAgIH07CiAgICAgICAgY29uc3QgcGF0aCA9ICdodHRwOi8vbG9jYWxob3N0OjUwMDAvaW5zdGFuY2VzJzsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QocGF0aCwgcGF5bG9hZCkKICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5nZXRJbnN0cygpOwogICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAnQXBwbHkgU3VjZXNzISc7CiAgICAgICAgICAgIHRoaXMuc2hvd01lc3NhZ2UgPSB0cnVlOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgICAgICB0aGlzLmdldEluc3RzKCk7CiAgICAgICAgICB9KTsKICAgICAgfQogICAgICB0aGlzLmluaXRGb3JtKCk7CiAgICB9LAogICAgcHJlQXBwbHlJbnN0KGluc3QpIHsKICAgICAgdGhpcy5hcHBseUdQVUZvcm0uZ3B1X251bSA9IGluc3QuZ3B1X251bTsKICAgIH0sCiAgICBvblJlc2V0QXBwbHkoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB0aGlzLiRyZWZzLmFwcGx5R1BVTW9kYWwuaGlkZSgpOwogICAgICB0aGlzLmluaXRGb3JtKCk7CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0SW5zdHMoKTsKICB9LAp9Owo="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col-sm-10\">\n        <h1>Instances</h1>\n        <hr />\n        <br /><br />\n        <alert :message=\"message\" v-if=\"showMessage\"></alert>\n        <br /><br />\n        <table class=\"table table-hover\">\n          <thead>\n            <tr>\n              <th scope=\"col\">Instance ID</th>\n              <th scope=\"col\">GPU config</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(inst, index) in insts\" :key=\"index\">\n              <td>{{ index }}</td>\n              <td>{{ inst.gpu_num }} GPUs, {{ inst.left_time }} days</td>\n              <td>\n                <div class=\"btn-group\" role=\"group\">\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-warning btn-sm\"\n                    v-b-modal.apply-gpu-modal\n                    @click=\"preApplyInst(inst)\"\n                  >\n                    Apply\n                  </button>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n    <b-modal\n      ref=\"applyGPUModal\"\n      id=\"apply-gpu-modal\"\n      title=\"Add a new book\"\n      hide-footer\n    >\n      <b-form @submit=\"onSubmitApply\" @reset=\"onResetApply\" class=\"w-100\">\n        <b-form-group id=\"form-read-group\">\n          <b-form-checkbox-group id=\"form-checks\" v-model=\"applyGPUForm.sure\">\n            <b-form-checkbox value=\"true\">Are you sure? </b-form-checkbox>\n          </b-form-checkbox-group>\n        </b-form-group>\n        <b-button type=\"submit\" variant=\"primary\">Submit</b-button>\n        <b-button type=\"reset\" variant=\"danger\">Cancel</b-button>\n      </b-form>\n    </b-modal>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport Alert from '@/components/Alert.vue';\n\nexport default {\n  data() {\n    return {\n      insts: [],\n      applyGPUForm: {\n        gpu_num: 0,\n        sure: false,\n      },\n      message: 'GPU alert',\n      showMessage: false,\n    };\n  },\n  components: {\n    alert: Alert,\n  },\n  methods: {\n    getInsts() {\n      const path = 'http://localhost:5000/instances';\n      axios\n        .get(path)\n        .then((res) => {\n          this.insts = res.data.insts;\n        })\n        .catch((error) => {\n          // eslint-disable-next-line\n          console.error(error);\n        });\n    },\n    initForm() {\n      this.applyGPUForm.gpu_num = 0;\n      this.applyGPUForm.sure = false;\n    },\n    onSubmitApply(evt) {\n      evt.preventDefault();\n      this.$refs.applyGPUModal.hide();\n      if (this.applyGPUForm.sure) {\n        const payload = {\n          gpu_num: this.applyGPUForm.gpu_num,\n        };\n        const path = 'http://localhost:5000/instances';\n        axios\n          .post(path, payload)\n          .then(() => {\n            this.getInsts();\n            this.message = 'Apply Sucess!';\n            this.showMessage = true;\n          })\n          .catch((error) => {\n            // eslint-disable-next-line\n            console.error(error);\n            this.getInsts();\n          });\n      }\n      this.initForm();\n    },\n    preApplyInst(inst) {\n      this.applyGPUForm.gpu_num = inst.gpu_num;\n    },\n    onResetApply(evt) {\n      evt.preventDefault();\n      this.$refs.applyGPUModal.hide();\n      this.initForm();\n    },\n  },\n  created() {\n    this.getInsts();\n  },\n};\n</script>\n"]}]}