{"remainingRequest":"/home/zyx/workspaces/python/server_management/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/zyx/workspaces/python/server_management/client/src/views/Applied.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/zyx/workspaces/python/server_management/client/src/views/Applied.vue","mtime":1621509922966},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/zyx/workspaces/python/server_management/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7YXBpX3JvdXRlcywgYXBpQ2FsbH0gZnJvbSAnQC91dGlscy9hcGknOwppbXBvcnQgRGF0YVRhYmxlIGZyb20gJ0AvY29tcG9uZW50cy9EYXRhVGFibGUnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdiaWdUYWJsZScsCiAgY29tcG9uZW50czogewogICAgRGF0YVRhYmxlLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFwcGxpZWRVUkw6IGFwaV9yb3V0ZXMudXNlci5hcHBsaWVkLAogICAgICBtZXRob2Q6ICJwb3N0IiwgCiAgICAgIHRhYmxlS2V5OiAwLAogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7fSwKICBtZXRob2RzOiB7CiAgICBncHVGb3JtYXQocm93LCBjb2x1bW4pIHsKICAgICAgcmV0dXJuIHJvdy5ncHVfbnVtICsgIuWNoSI7CiAgICB9LAogICAgdGltZUZvcm1hdChyb3csIGNvbHVtbikgewogICAgICByZXR1cm4gcm93LmxlZnRfdGltZSArICLlpKkiOwogICAgfSwKICAgIHN0YXR1c0Zvcm1hdChyb3csIGNvbHVtbikgewogICAgICBzdGF0dXMgPSByb3cuc3RhdHVzOwogICAgICBpZiAoc3RhdHVzID09ICJ3YWl0IikgewogICAgICAgIHJldHVybiAi5o6S6Zif5LitIjsKICAgICAgfWVsc2UgaWYgKHN0YXR1cyA9PSAiYWxsb2NhdGVkIil7CiAgICAgICAgcmV0dXJuICLlt7LliIbphY0iOwogICAgICB9CiAgICAgIHJldHVybiAiRXJyb3IgU3RhdHVzIjsKICAgIH0sCiAgICBwb3J0Rm9ybWF0KHJvdywgY29sdW1uKXsKICAgICAgaWYgKHJvdy5zdGF0dXMgPT0gImFsbG9jYXRlZCIpewogICAgICAgIHJldHVybiByb3cucG9ydDsKICAgICAgfWVsc2V7CiAgICAgICAgcmV0dXJuICJ4eHh4IjsKICAgICAgfQogICAgfSwKICAgIG9uQ29weTogZnVuY3Rpb24gKGUpIHsKICAgICAgdGhpcy4kbWVzc2FnZSh7dHlwZTogJ2luZm8nLCBtZXNzYWdlOiLlt7LlpI3liLYifSk7CiAgICB9LAogICAgb25FcnJvcjogZnVuY3Rpb24gKGUpIHsKICAgICAgdGhpcy4kbWVzc2FnZSh7dHlwZTogJ3dhcm5pbmcnLCBtZXNzYWdlOiLmtY/op4jlmajkuI3mlK/mjIEifSk7CiAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgfSwKICAgIHRhYmxlUm93Q2xhc3NOYW1lKHtyb3csIHJvd0luZGV4fSkgewogICAgICBpZiAocm93SW5kZXggPT09IDEpIHsKICAgICAgICByZXR1cm4gJ3dhcm5pbmctcm93JzsKICAgICAgfSBlbHNlIGlmIChyb3dJbmRleCA9PT0gMykgewogICAgICAgIHJldHVybiAnc3VjY2Vzcy1yb3cnOwogICAgICB9CiAgICAgIHJldHVybiAnJzsKICAgIH0sCiAgICBoYW5kbGVSZWxlYXNlKHJvd19pbmRleCwgcm93KXsKICAgICAgbGV0IHtuYW1lfSA9IHJvdzsKICAgICAgbGV0IHJlbGVhc2VVUkwgPSBhcGlfcm91dGVzLnVzZXIucmVsZWFzZTsKICAgICAgdGhpcy4kY29uZmlybSgn6L+Z5Lya6YeK5pS+6LWE5rqQ77yM5peg6K665piv5ZCm5bey6KKr5YiG6YWN77yM56Gu6K6k5ZCXJywgJ1dhcm5pbmcnLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7orqQnLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgIG1lc3NhZ2U6ICfotYTmupDlt7Lph4rmlL4nCiAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgYXBpQ2FsbCh7dXJsOiByZWxlYXNlVVJMLCBkYXRhOiB7bmFtZX0sIG1ldGhvZDogImRlbGV0ZSJ9KQogICAgICAgICAgLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoe3R5cGU6ICdpbmZvJywgbWVzc2FnZTogcmVzcC5tZXNzYWdlfSk7CiAgICAgICAgICAgIHRoaXMudGFibGVLZXkgKz0gMTsKICAgICAgICAgICAgY29uc29sZS5sb2coInRhYmxlIGtleSBpbiB0aGVuOiAiLCB0aGlzLnRhYmxlS2V5KTt9KTsKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgbWVzc2FnZTogJ+WPlua2iOmHiuaUvicKICAgICAgICB9KTsgICAKICAgICAgICB0aGlzLnRhYmxlS2V5ICs9IDE7ICAgICAgICAgICAgIAogICAgICB9KTsKICAgIH0KICB9LAp9Owo="},{"version":3,"sources":["Applied.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Applied.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <data-table\n      ref=\"dateTable\"\n      :apiUrl=\"appliedURL\"\n      :row-class-name=\"tableRowClassName\"\n      :key=\"tableKey\"\n    >\n    <template slot=\"columns\" style=\"width: 100%\" >\n      <el-table-column prop=\"name\" label=\"实例\" align=\"center\" :min-width=\"15\">\n      </el-table-column>\n      <el-table-column prop=\"gpu_num\" label=\"GPU 配置\" align=\"center\" :min-width=\"20\"\n        :formatter=\"gpuFormat\">\n      </el-table-column>\n      <el-table-column prop=\"left_time\" label=\"时长\" align=\"center\" :min-width=\"20\"\n        :formatter=\"timeFormat\">\n      </el-table-column>\n      <el-table-column prop=\"status\" label=\"状态\" align=\"center\" :min-width=\"10\"\n        :formatter=\"statusFormat\">\n      </el-table-column>\n      <el-table-column prop=\"port\" label=\"端口\" align=\"center\" :min-width=\"15\"\n        :formatter=\"portFormat\">\n      </el-table-column>\n      <el-table-column label=\"密码\" align=\"center\" prop=\"password\" :min-width=\"50\">\n        <template slot-scope=\"scope\">\n          <span style=\"margin-right:1.25em;\">{{scope.row.password}}</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n          <el-button\n            icon=\"el-icon-copy-document\"\n            round\n            size=\"mini\"\n            v-clipboard:copy=\"scope.row.password\"\n            v-clipboard:success=\"onCopy\"\n            v-clipboard:error=\"onError\"\n          >copy</el-button>\n        </template>\n      </el-table-column>\n      <el-table-column\n      label=\"操作\"\n      align=\"center\"\n      :min-width=\"15\">\n      <template slot-scope=\"scope\" prop=\"operation\" >\n        <el-button\n          type=\"danger\"\n          size=\"mini\"\n          icon=\"el-icon-delete\"\n          @click=\"handleRelease(scope.$index, scope.row)\">释放</el-button>\n      </template>\n    </el-table-column>\n    </template>\n    </data-table>\n  </div>\n</template>\n\n<script>\nimport {api_routes, apiCall} from '@/utils/api';\nimport DataTable from '@/components/DataTable';\n\nexport default {\n  name: 'bigTable',\n  components: {\n    DataTable,\n  },\n  data() {\n    return {\n      appliedURL: api_routes.user.applied,\n      method: \"post\", \n      tableKey: 0,\n    };\n  },\n  mounted() {},\n  methods: {\n    gpuFormat(row, column) {\n      return row.gpu_num + \"卡\";\n    },\n    timeFormat(row, column) {\n      return row.left_time + \"天\";\n    },\n    statusFormat(row, column) {\n      status = row.status;\n      if (status == \"wait\") {\n        return \"排队中\";\n      }else if (status == \"allocated\"){\n        return \"已分配\";\n      }\n      return \"Error Status\";\n    },\n    portFormat(row, column){\n      if (row.status == \"allocated\"){\n        return row.port;\n      }else{\n        return \"xxxx\";\n      }\n    },\n    onCopy: function (e) {\n      this.$message({type: 'info', message:\"已复制\"});\n    },\n    onError: function (e) {\n      this.$message({type: 'warning', message:\"浏览器不支持\"});\n      console.log(e);\n    },\n    tableRowClassName({row, rowIndex}) {\n      if (rowIndex === 1) {\n        return 'warning-row';\n      } else if (rowIndex === 3) {\n        return 'success-row';\n      }\n      return '';\n    },\n    handleRelease(row_index, row){\n      let {name} = row;\n      let releaseURL = api_routes.user.release;\n      this.$confirm('这会释放资源，无论是否已被分配，确认吗', 'Warning', {\n        confirmButtonText: '确认',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$message({\n          type: 'success',\n          message: '资源已释放'\n        });\n        \n        apiCall({url: releaseURL, data: {name}, method: \"delete\"})\n          .then(resp => {\n            this.$message({type: 'info', message: resp.message});\n            this.tableKey += 1;\n            console.log(\"table key in then: \", this.tableKey);});\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '取消释放'\n        });   \n        this.tableKey += 1;             \n      });\n    }\n  },\n};\n</script>\n\n<style>\n.el-table .warning-row {\n  background: oldlace;\n}\n\n.el-table .success-row {\n  background: #f0f9eb;\n}\n</style>"]}]}